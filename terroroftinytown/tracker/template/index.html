{% extends 'base.html' %}

{% block title %} URLTeam Tracker {% end %}

{% block body %}
<div id="index-admin_nav">
	<a href="{{ reverse_url('admin.overview') }}">Tracker admin</a>
</div>

<div id="index-banner">
	<div id="index-banner-title">URLTeam Tracker</div>
	<div id="index-banner-byline">The Terror of Tiny Town</div>
</div>

<div id="index-main" role="main" ng-app="stats">
	<nav id="index-nav">
		<a class="index-nav-item"
			href="http://archiveteam.org/index.php?title=Warrior">How to help</a>
		<a class="index-nav-item"
			href="http://archiveteam.org/index.php?title=URLTeam">About</a>
		<a class="index-nav-item"
			href="{{ reverse_url('index.status') }}">Status</a>
		<a class="index-nav-item"
			href="https://github.com/ArchiveTeam/terroroftinytown">
			Source code</a>
	</nav>
	<div id="stats" ng-controller="StatsController">
		<div id="globalstats">
			<strong ng-bind="stats.global[1]|number">0</strong> URLs scanned, <strong ng-bind="stats.global[0]|number">0</strong> saved
		</div>
		<div id="leaderboard" class="row clearfix">
			<div id="leaderboard-totals" class="column half">
				<h1>Projects</h1>
				<table class="leaderboard-table">
					<thead>
						<tr>
							<th>Project</th>
							<th>Found</th>
							<th>Scanned</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="item in stats.project|toArray">
							<td ng-bind="item[0]"></td>
							<td ng-bind="item[1][0]|number"></td>
							<td ng-bind="item[1][1]|number"></td>
						</tr>
					</tbody>
				</table>
				<h1>Totals</h1>
				Limit: <input type="number" ng-model="totalLimit">
				<table class="leaderboard-table">
					<thead>
						<tr>
							<th>Username</th>
							<th>Found</th>
							<th>Scanned</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="item in lifetime|orderBy:getScanned:true|limitTo:totalLimit">
							<td ng-bind="item[0]"></td>
							<td ng-bind="item[1][0]|number"></td>
							<td ng-bind="item[1][1]|number"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div id="leaderboard-recent" class="column half">
				<h1>Recent</h1>
				Limit: <input type="number" ng-model="recentLimit">
				<table class="leaderboard-table">
					<thead>
						<tr>
							<th>Username</th>
							<th>Found</th>
							<th>Scanned</th>
							<th>Service</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="item in stats.live">
							<td ng-bind="item.username"></td>
							<td ng-bind="item.found|number"></td>
							<td ng-bind="item.scanned|number"></td>
							<td ng-bind="item.project"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.19/angular.min.js"></script>
<script src="{{ static_url('stats.js') }}"></script>
{% end %}
